{% extends 'layout.html' %}

{% block css %}
    {% assets "scss_all" %}
        <link rel=stylesheet type=text/css href="{{ ASSET_URL }}">
    {% endassets %}
{% endblock %}

{% block body %}
    <div id="board" class="mt-5">
        {% for field in game.board %}
            <div class="tile" data-type="{{ field.type }}" id="field{{ loop.index0 }}">
                {{ field.label }}
                <div class="players">
                    {% set fieldloop = loop %}
                    {% for player in game.players %}
                        {% if player.current_field_id == fieldloop.index0 %}
                            <div class="player">{{ player.id }}</div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endfor %}

        <div id="display">
            <div class="cash">
                {% for player in game.players %}
                    player{{ player.id }}: {{ player.money }}
                {% endfor %}
            </div>
            <form method="post" action="{{ url_for('game.hot_seats') }}/{{ code }}">
                <input type="hidden" name="next_turn" value="1">
                {% if game.can_buy %}
                    <div>
                        <p>do you want to buy field: {{ game.board[game.players[game.current_player_index].current_field_id].label }}, for ?</p>
                        <label><input type="radio" name="buy" value="0">no</label>
                        <label><input type="radio" name="buy" value="1" checked>yes</label>
                    </div>
                {% endif %}
                <input type="submit" value="next turn">
            </form>
            <div class="msgs">
                {% for msg in game.msgs|reverse %}
                    <p>{{ msg }}</p>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    {% assets "js_build" %}
        <!-- <link rel=stylesheet type=text/css href="{{ ASSET_URL }}"> -->
        <script src="{{ ASSET_URL }}"></script>
    {% endassets %}
{% endblock %}